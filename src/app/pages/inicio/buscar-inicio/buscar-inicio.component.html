<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Productos - TodoTech Shop</title>
    <link rel="stylesheet" href="buscar-inicio.component.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- ‚úÖ NAVBAR -->
    <app-navbar-inicio></app-navbar-inicio>

    <!-- ‚úÖ CARRITO -->
    <app-carrito
        [mostrarCarrito]="mostrarCarrito"
        [carritoVisible]="carritoVisible"
        (carritoVisibleChange)="onCarritoVisibleChange($event)">
    </app-carrito>

    <!-- ‚úÖ LOADING STATE -->
    <div *ngIf="loading" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Cargando productos...</p>
    </div>

    <!-- ‚úÖ ERROR STATE -->
    <div *ngIf="error && !loading" class="error-container">
        <div class="error-message">
            <h3>üòï Ocurri√≥ un error</h3>
            <p>{{ error }}</p>
            <button (click)="recargarProductos()" class="btn-retry">Reintentar</button>
        </div>
    </div>

    <!-- ‚úÖ CONTENIDO PRINCIPAL -->
    <div *ngIf="!loading && !error">
        <!-- üîπ BANNER DE B√öSQUEDA -->
        <section class="banner-search">
            <div class="banner-content">
                <h2>
                    <span class="reveal-text delay-1">üîç Encuentra lo que necesitas</span>
                    <span class="reveal-text delay-2">Busca entre nuestra amplia gama de productos tecnol√≥gicos</span>
                </h2>
            </div>
        </section>

        <!-- üîπ PANEL DE B√öSQUEDA Y FILTROS -->
        <section class="search-panel">
            <div class="search-container">
                <div class="search-box-wrapper">
                    <div class="search-box">
                        <div class="search-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <input 
                            type="text" 
                            [(ngModel)]="terminoBusqueda"
                            placeholder="Buscar productos, marcas, categor√≠as..."
                            class="search-input"
                            (keyup.enter)="buscarProductos()"
                        >
                        <button class="search-btn" (click)="buscarProductos()">
                            <span class="btn-text">Buscar</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    <div class="search-decoration">
                        <div class="decoration-circle circle-1"></div>
                        <div class="decoration-circle circle-2"></div>
                        <div class="decoration-circle circle-3"></div>
                    </div>
                </div>

                <!-- FILTROS -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label for="categoria">Categor√≠a:</label>
                        <select id="categoria" [(ngModel)]="categoriaSeleccionada" (change)="aplicarFiltros()">
                            <option value="todas">Todas las categor√≠as</option>
                            <option *ngFor="let categoria of categorias" [value]="categoria.id">
                                {{ categoria.nombre }}
                            </option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="precioMin">Precio M√≠n:</label>
                        <input type="number" id="precioMin" [(ngModel)]="precioMin" 
                               (change)="aplicarFiltros()" min="0" [max]="precioMax">
                    </div>

                    <div class="filter-group">
                        <label for="precioMax">Precio M√°x:</label>
                        <input type="number" id="precioMax" [(ngModel)]="precioMax" 
                               (change)="aplicarFiltros()" [min]="precioMin" max="10000000">
                    </div>

                    <div class="filter-group">
                        <label for="ordenar">Ordenar por:</label>
                        <select id="ordenar" [(ngModel)]="ordenarPor" (change)="aplicarFiltros()">
                            <option value="nombre">Nombre</option>
                            <option value="precio-asc">Precio: Menor a Mayor</option>
                            <option value="precio-desc">Precio: Mayor a Menor</option>
                            <option value="stock">Stock</option>
                        </select>
                    </div>

                    <button class="btn-limpiar" (click)="limpiarFiltros()">
                        <i class="fas fa-refresh"></i> Limpiar Filtros
                    </button>
                </div>
            </div>
        </section>

        <!-- üîπ CARRUSELES DE PRODUCTOS POR CATEGOR√çA -->
        <app-carrusel-productos
            *ngFor="let grupo of productosPorCategoria"
            [productos]="grupo.productos"
            [titulo]="grupo.categoria.nombre"
            [carouselId]="'categoria-' + grupo.categoria.id">
        </app-carrusel-productos>

        <!-- üîπ MENSAJE CUANDO NO HAY RESULTADOS -->
        <section *ngIf="productosFiltrados.length === 0 && !loading" class="no-results">
            <div class="no-results-content">
                <i class="fas fa-search fa-3x"></i>
                <h3>No se encontraron productos</h3>
                <p>Intenta con otros t√©rminos de b√∫squeda o ajusta los filtros</p>
                <button class="btn-primary" (click)="limpiarFiltros()">
                    <i class="fas fa-refresh"></i> Mostrar todos los productos
                </button>
            </div>
        </section>
    </div>

    <!-- ‚úÖ FOOTER -->
    <footer>
        <div class="footer-container">
            <div class="footer-section about">
                <h2>TodoTech Shop</h2>
                <p>Tu destino para lo √∫ltimo en tecnolog√≠a. Encuentra laptops, smartphones, gaming y m√°s.</p>
            </div>
            
            <div class="footer-section links">
                <h3>Enlaces r√°pidos</h3>
                <ul>
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#">Ofertas</a></li>
                    <li><a href="#">Pol√≠tica de privacidad</a></li>
                    <li><a href="#">T√©rminos y condiciones</a></li>
                </ul>
            </div>
    
            <div class="footer-section contact">
                <h3>Contacto</h3>
                <p>Tel√©fono: +57 305 407 8225</p>
            </div>
    
            <div class="footer-section social">
                <h3>S√≠guenos</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    
        <div class="footer-bottom">
            <p>¬© 2025 TodoTech Shop. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>
</html>