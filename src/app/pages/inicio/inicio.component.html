<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoTech Shop</title>
    <link rel="stylesheet" href="inicio.component.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Reemplaza todo el header con el nuevo navbar -->
    <app-navbar-inicio></app-navbar-inicio>
    
    <section class="banner">
        <div class="banner-content">
            <h2>
                <span class="reveal-text delay-1">¬° Bienvenido a TodoTechShop Tecnolog√≠a Sin L√≠mites !</span>
                <span class="reveal-text delay-2"></span>
                <span class="reveal-text delay-3">Descubre innovaci√≥n, calidad y asesor√≠a experta en cada compra</span>       
            </h2>
        </div>
    </section>
   
    <!-- Carrito (solo aparece al bajar el scroll) - CON EFECTOS DE ENTRADA -->
    <div class="cart-wrapper slide-right-entrance" *ngIf="mostrarCarrito">
        <!-- Bot√≥n para abrir/cerrar el carrito -->
        <button class="cart-button bounce-entrance" (click)="toggleCarrito()">
            üõí <span>Carrito</span>
        </button>

        <!-- Contenedor del carrito -->
        <div class="cart-panel" [ngClass]="{ 'open': carritoVisible }">
            <div class="cart-header">
                <h3 class="text-reveal">üõç Mi Carrito</h3>
                <button class="close-btn fade-in-entrance" (click)="toggleCarrito()">‚úñ</button>
            </div>

            <div class="cart-body">
                <!-- Encabezados de la tabla -->
                <div class="cart-row cart-header-row fade-in-entrance">
                    <span class="cart-col">Producto</span>
                    <span class="cart-col">Cantidad</span>
                    <span class="cart-col">Subtotal</span>
                    <span class="cart-col">Acciones</span>
                </div>

                <!-- Detalles del carrito -->
                <div *ngFor="let item of carrito; let i = index" class="cart-row slide-up-entrance" [ngClass]="'entrance-delay-' + (i + 1)">
                    <span class="cart-col">{{ item.nombreProducto }}</span>
                    <span class="cart-col">
                        <div class="quantity-controls">
                            <button class="quantity-btn bounce-entrance" (click)="ajustarCantidad(i, -1)">‚àí</button>
                            <span class="fade-in-entrance">{{ item.detalle.cantidad }}</span>
                            <button class="quantity-btn bounce-entrance" (click)="ajustarCantidad(i, 1)">+</button>
                        </div>
                    </span>
                    <span class="cart-col zoom-entrance">{{ formatearPrecio(item.detalle.subtotal) }}</span>
                    <span class="cart-col">
                        <button class="remove-btn bounce-entrance" (click)="eliminarProducto(i)">üóëÔ∏è</button>
                    </span>
                </div>

                <div class="cart-footer-actions">
                    <button class="btn-cart btn-checkout component-entrance" (click)="pagarCarrito()">
                        <i class="fas fa-shopping-cart"></i> Pagar Carrito
                    </button>

                    <div class="action-buttons">
                        <div *ngIf="mostrarInputDescuento" class="discount-input-container fade-in-entrance">
                            <input 
                                type="text" 
                                [(ngModel)]="codigoDescuento"
                                placeholder="C√≥digo de descuento"
                                class="discount-input"
                                (keyup.enter)="validarDescuento()"
                                [disabled]="aplicandoDescuento"
                            >
                            <button 
                                class="btn-cart btn-apply bounce-entrance" 
                                (click)="validarDescuento()"
                                [disabled]="aplicandoDescuento || !codigoDescuento.trim()"
                            >
                                {{ aplicandoDescuento ? 'Aplicando...' : 'Aplicar' }}
                            </button>
                            <button 
                                class="btn-cart btn-cancel-input bounce-entrance" 
                                (click)="mostrarInputDescuento = false"
                                [disabled]="aplicandoDescuento"
                            >√ó</button>
                        </div>
                        
                        <button 
                            class="btn-cart btn-discount fade-in-entrance" 
                            (click)="aplicarDescuento()"
                            *ngIf="!mostrarInputDescuento"
                        >
                            üéü Aplicar Descuento
                        </button>
                        
                        <button class="btn-cart btn-cancel fade-in-entrance" (click)="cancelarOrden()">üóë Cancelar</button>
                    </div>

                    <!-- Mensaje de error -->
                    <div *ngIf="errorDescuento" class="error-message fade-in-entrance">
                        {{ errorDescuento }}
                    </div>
                </div>
            </div>
        </div>
    </div>
  

    <!-- Carrusel Iphone -->
<section class="products-section iphone-section" *ngIf="productosIphone.length > 0">
    <div class="section-header">
        <h2 class="section-title">üì± Smartphones iPhone</h2>
        <p class="section-subtitle">Descubre la innovaci√≥n y elegancia de Apple</p>
    </div>
    
    <div class="carousel-container">
        <button class="carousel-nav prev" (click)="scrollCarousel('prev', 'iphone')">‚Äπ</button>
        
        <div class="carousel-wrapper">
            <div class="carousel" id="carousel-iphone">
                <div class="carousel-item" *ngFor="let producto of productosIphone">
                    <!-- Agregar (click) en el product-card y $event.stopPropagation() en el bot√≥n -->
                    <div class="product-card" (click)="verDetalleProducto(producto)">
                        <div class="product-image-container">
                            <img [src]="'assets/' + producto.imagenUrl" alt="{{ producto.nombre }}" class="product-image">
                        </div>
                        
                        <div class="product-content">
                            <div class="product-header">
                                <h3 class="product-title">{{ producto.nombre }}</h3>
                                <span class="category-badge">{{ producto.categoria.nombre }}</span>
                            </div>
                            
                            <div class="product-description">
                                <p>{{ producto.descripcion }}</p>
                            </div>
                            
                            <div class="product-price-container">
                                <span class="price price-subtle">
                                    {{ formatearPrecio(producto.precio) }}
                                    <div class="price-inner-glow"></div>
                                </span>
                            </div>
                            
                            <div class="product-actions">
                                <div class="carrito-container">
                                    <!-- Agregar $event.stopPropagation() para evitar que el clic se propague al card -->
                                    <button 
                                        class="btn-carrito" 
                                        (click)="agregarAlCarrito(producto); $event.stopPropagation()"
                                        [disabled]="producto.stock === 0"
                                        [ngClass]="{'btn-disabled': producto.stock === 0}"
                                    >
                                        <span class="btn-icon">üõí</span>
                                        <span class="btn-text">
                                            {{ producto.stock === 0 ? 'Sin Stock' : 'Agregar al carrito' }}
                                        </span>
                                    </button>
                                    <span class="stock-info" [ngClass]="obtenerClaseStock(producto)">
                                        {{ obtenerTextoStock(producto) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="carousel-nav next" (click)="scrollCarousel('next', 'iphone')">‚Ä∫</button>
    </div>
    
    <div class="carousel-indicators">
        <span class="indicator active"></span>
        <span class="indicator"></span>
        <span class="indicator"></span>
    </div>
</section>

    <div class="promos-container">
        <div class="promo-box" id="promo1">
            <img src="assets/catalogo.jpg" alt="Escanea el c√≥digo QR">
            <div class="promo-text">
                <h3>Escanea el c√≥digo QR</h3>
                <p>y mira el cat√°logo en tu celular</p>
            </div>
        </div>
        <div class="promo-box" id="promo2">
            <div class="promo-text">
                <h3>Obt√©n descuentos especiales en nuestros productos</h3>
            </div>
        </div>
        <div class="promo-box" id="promo3">
            <img src="assets/tienda.png" alt="Conoce nuestros productos">
            <div class="promo-text">
                <h3>Conoce nuestros productos</h3>
                <p>Tecnolog√≠a sin l√≠mites</p>
            </div>
        </div>
    </div>
  
    
  
    <!-- Carrusel HP -->
    <section class="products-section hp-section" *ngIf="productosHp.length > 0">
        <div class="section-header">
            <h2 class="section-title">üíª Laptops HP</h2>
            <p class="section-subtitle">Potencia y rendimiento para trabajo y entretenimiento</p>
        </div>
        
        <div class="carousel-container">
            <button class="carousel-nav prev" (click)="scrollCarousel('prev', 'hp')">‚Äπ</button>
            
            <div class="carousel-wrapper">
                <div class="carousel" id="carousel-hp">
                    <div class="carousel-item" *ngFor="let producto of productosHp">
                        <div class="product-card" (click)="verDetalleProducto(producto)">
                            <div class="product-image-container">
                                <img [src]="'assets/' + producto.imagenUrl" alt="{{ producto.nombre }}" class="product-image">
                            </div>
                            
                            <div class="product-content">
                                <div class="product-header">
                                    <h3 class="product-title">{{ producto.nombre }}</h3>
                                    <span class="category-badge">{{ producto.categoria.nombre }}</span>
                                </div>
                                
                                <div class="product-description">
                                    <p>{{ producto.descripcion }}</p>
                                </div>
                                
                                <div class="product-price-container">
                                    <span class="price price-subtle">
                                        {{ formatearPrecio(producto.precio) }}
                                        <div class="price-inner-glow"></div>
                                    </span>
                                </div>
                                
                                <div class="product-actions">
                                    <div class="carrito-container">
                                        <button 
                                            class="btn-carrito" 
                                            (click)="agregarAlCarrito(producto); $event.stopPropagation()"
                                            [disabled]="producto.stock === 0"
                                            [ngClass]="{'btn-disabled': producto.stock === 0}"
                                        >
                                            <span class="btn-icon">üõí</span>
                                            <span class="btn-text">
                                                {{ producto.stock === 0 ? 'Sin Stock' : 'Agregar al carrito' }}
                                            </span>
                                        </button>
                                        <span class="stock-info" [ngClass]="obtenerClaseStock(producto)">
                                            {{ obtenerTextoStock(producto) }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="carousel-nav next" (click)="scrollCarousel('next', 'hp')">‚Ä∫</button>
        </div>
        
        <div class="carousel-indicators">
            <span class="indicator active"></span>
            <span class="indicator"></span>
            <span class="indicator"></span>
        </div>
    </section>
    
    <footer>
        <div class="footer-container">
            <div class="footer-section about">
                <h2>TodoTech Shop</h2>
                <p>Tu destino para lo √∫ltimo en tecnolog√≠a. Encuentra laptops, smartphones, gaming y m√°s.</p>
            </div>
            
            <div class="footer-section links">
                <h3>Enlaces r√°pidos</h3>
                <ul>
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#">Ofertas</a></li>
                    <li><a href="#">Pol√≠tica de privacidad</a></li>
                    <li><a href="#">T√©rminos y condiciones</a></li>
                </ul>
            </div>
    
            <div class="footer-section contact">
                <h3>Contacto</h3>
                <p>Tel√©fono: +57 305 407 8225</p>
            </div>
    
            <div class="footer-section social">
                <h3>S√≠guenos</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    
        <div class="footer-bottom">
            <p>¬© 2025 TodoTech Shop. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>
</html>